<ion-header> <ion-toolbar>
  <ion-buttons slot="start">
    <ion-button color="light" (click)="goBack()" slot="start" fill="clear">
      <ion-icon name="arrow-back"></ion-icon>
    </ion-button>
  </ion-buttons>
  <ion-title color="light">Κριτικές</ion-title>
</ion-toolbar></ion-header>

<ion-content class="background">
<ion-grid>
  <ion-row class="ion-justify-content-center">
    <ion-col size="12" class="ion-no-padding">
      <ion-grid class="bgL ion-margin-top ion-margin-end ion-margin-start" *ngIf="reviews.length!=0">
        <ion-row >
          <ion-col size="12" class="ion-text-center">
            <h5>
              <ion-icon name="star" color="primary"></ion-icon>
              {{expertReviewsData[0][1]}} <ion-note> ({{expertReviewsData[0][2]}})</ion-note>
            </h5>
            <ion-label> </ion-label>
          </ion-col> </ion-row>
        <ion-row class="ion-margin-top reviews" *ngIf="reviews.length!=0">
          <ion-col size="12" class="ion-margin-bottom">
            <ion-progress-bar [value]="fiveStarReviews" class="pro proSucc"></ion-progress-bar>
            <ion-label>
              <ion-note>Εξαιρετικά</ion-note>
            </ion-label>
          </ion-col>
          <ion-col size="12" class="ion-margin-bottom">
            <ion-progress-bar [value]="fourStarReviews" class="pro proGood"></ion-progress-bar>
            <ion-label>
              <ion-note> Ικανοποιητικά</ion-note>
            </ion-label>
          </ion-col>
          <ion-col size="12" class="ion-margin-bottom">
            <ion-progress-bar [value]="threeStarReviews" class="pro proWarn"></ion-progress-bar>
            <ion-label>
              <ion-note>Μέτρια</ion-note>
            </ion-label>
          </ion-col>
          <ion-col size="12" class="ion-margin-bottom">
            <ion-progress-bar [value]="twoStarReviews" class="pro proDownAvrg"></ion-progress-bar>
            <ion-label>
              <ion-note>Μη Ικανοποιητικά</ion-note>
            </ion-label>
          </ion-col>
          <ion-col size="12" class="ion-margin-bottom">
            <ion-progress-bar [value]="oneStarReviews" class="pro proDang"></ion-progress-bar>
            <ion-label>
              <ion-note>Ανεπαρκής</ion-note>
            </ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-grid>
        <ion-row class="ion-justify-content-center">
          <ion-item class="ion-padding " lines="none" *ngIf="reviews.length==0">
            <ion-grid>
              <ion-row>
                <ion-img class="no_results_item" src="../../../assets/imgs/search.svg"> </ion-img>
              </ion-row>
              <ion-row> <ion-note class="no_results_text">
                  Δεν έχετε ακόμα κριτικές.
                </ion-note>
              </ion-row>
            </ion-grid> </ion-item>

          <ion-card class="bgL ion-padding-bottom w100" *ngFor="let item of reviews">
            <ion-grid>
              <ion-row>
                <ion-col size="7">
                  <ion-item lines="none" class="cusItem ion-no-padding"> <ion-avatar class="custAvatar">
                      <ion-img class="custAvatar" src="data:image/jpeg;base64,{{item[3]}}"></ion-img> </ion-avatar>
                    <ion-label class="name_reviews nameCol" text-wrap>{{item[4]}}</ion-label> </ion-item> </ion-col>
                <ion-col size="5" class="dateCol">
                  <ion-grid>
                    <ion-row>
                      <ion-note class="alignRight dateNote">{{item[5]}}</ion-note> </ion-row>
                    <ion-row>
                      <ion-chip class=" ion-text-center" outline="true" color="primary" class="alignRight">
                        <ion-label class="w100">
                          <ion-icon name="star" *ngFor="let item2 of numSequence(item[1])"></ion-icon>
                          <ion-icon name="star-outline" *ngFor="let item2 of numSequence(5-item[1])"></ion-icon>
                        </ion-label>
                      </ion-chip>
                    </ion-row>
                  </ion-grid> </ion-col> </ion-row>
              <ion-row class="ion-padding-bottom ion-padding-start ion-padding-end relative"> <ion-note>
                  {{ item[10] ? item[2] : item[2].substr(0, 70) + '...' }} </ion-note>
                <ion-note color="primary" *ngIf="!item[10] && item[2].length > 70" class="show-more-button"
                  (click)="item[10] = true">Προβολή κριτικής</ion-note>
                <ion-note color="primary" *ngIf="item[10] && item[2].length > 70" class="show-less-button"
                  (click)="item[10] = false">Απόκρυψη</ion-note> </ion-row>
              <ion-row>
                <ion-grid class="ion-no-padding ion-padding-start ion-padding-end ion-margin-top"
                  *ngIf="item[6]!=null">
                  <ion-row class="bgPshadeP">
                    <ion-col size="12">
                      <ion-item lines="none" class="cusItem">
                        <ion-avatar slot="start">
                          <ion-img src="data:image/jpeg;base64,{{expertImage}}"></ion-img>
                        </ion-avatar>
                        <ion-label text-wrap class="name_reviews"> {{expertReviewsData[0][0]}}</ion-label>
                        <ion-note slot="end">{{item[7]}}</ion-note>
                      </ion-item>
                    </ion-col>
                    <ion-col size="12" class="ion-padding">
                      <ion-note>
                        {{item[6]}}
                      </ion-note>
                    </ion-col>
                  </ion-row>
                </ion-grid> <ion-grid class="ion-no-padding ion-padding-start ion-padding-end ion-margin-top"
                  *ngIf="item[6]==null">
                  <ion-row class="backgroundWhite">
                    <ion-col size="12">
                      <ion-item lines="none" class="cusItem">
                        <ion-avatar slot="start">
                          <ion-img src="data:image/jpeg;base64,{{expertImage}}"></ion-img>
                        </ion-avatar>
                        <ion-item fill="outline" class="responseItem">
                          <ion-label position="floating" class="f15">Απαντήστε στην κριτική</ion-label>
                          <ion-textarea rows="1" [(ngModel)]="item[9]"></ion-textarea>
                          <ion-button slot="end" expand="block" class="sendButton" (click)="sendResponse(item)"
                            *ngIf="item[9].length>0">
                            <ion-icon name="send"></ion-icon>
                          </ion-button>
                        </ion-item> </ion-item>
                    </ion-col> </ion-row>
                </ion-grid> </ion-row>
            </ion-grid> </ion-card> </ion-row>
      </ion-grid>
    </ion-col>
  </ion-row>
</ion-grid>
</ion-content>